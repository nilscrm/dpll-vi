
mod sat = "./sat.vi";

use sat::cnf::parse_cnf;
use sat::Solver;

pub fn main(&io: &IO) {
  let Ok(formula) = parse_cnf(&io) else match {
    Err(err) {
      io.println("Error: {err}");
      return;
    }
  };

  match Solver::solve(&formula) {
    Some(solution) {
      io.println("satisfiable");
      io.println("evaluation under model: {formula.evaluate(&solution).show()}");
      for (var, value) in solution!.into_iter() {
        io.println("var {var} = {value}");
      }
    }
    None {
      io.println("unsatisfiable");
    }
  }
}
